<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>EntreLocate</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/entrelocate_logo2_circle.png') }}">
    <link
        rel="stylesheet"
        href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

</head>
<body>
    <div class="sidebar" id="sidebar">
        <div class="sidebar-logo-container">
            <img src="{{ url_for('static', filename='images/entrelocate_logo2_circle.png') }}" alt="Logo" class="sidebar-logo">
        </div>
        <form id="searchForm">
            <label for="dropdownMenus">Search Filters:</label>
            <div class="dropdown-group">
                <label for="city">City:</label>
                <select id="city" required>
                    <option value="">Loading cities...</option>
                </select>

                <label for="district">District:</label>
                <select id="district" required disabled>
                    <option value="">Select a city first</option>
                </select>

                <label for="business_type">Category:</label>
                <div style="display: flex; gap: 10px;">
                    <input
                        type="text"
                        id="business_type"
                        placeholder="Enter category (e.g. shop, amenity, tourism)"
                        required
                    />
                    <button
                        type="button"
                        id="categoryHelp"
                        style="background: #94b0d8; color: white; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: pointer; font-weight: bold;"
                        title="Click for category suggestions"
                    >?</button>
                </div>
                <div id="categorySuggestions" style="margin-top: 5px; font-size: 12px; color: #586a8c;">
                </div>
            </div>

            <button type="submit">Search</button>
        </form>
        <button id="downloadBtn" class="sidebar-button">üì• Download Results</button>
    </div>

    <div class="sidebar-toggle-container">
        <div class="sidebar-toggle" id="sidebarToggle" title="Toggle Sidebar">
            <div class="toggle-triangle"></div>
        </div>
    </div>

    <div class="content" id="content">
        <div class="map-container">
            <div class="map-header">
                <span class="map-header-icon">üìç</span> Map View
            </div>
            <div class="map-content">
                <div id="map"></div>
            </div>
        </div>

        <div class="chatbot-container">
            <div class="chat-header">
                <span class="chat-header-icon">üí¨</span> Chat Assistant
            </div>
            <div class="chat-messages" id="chatResponse">
                <div class="message bot-message">Hello! I can help you with information about businesses. Feel free to ask me anything.</div>
            </div>
            <div class="chat-input">
                <input
                    type="text"
                    id="chatInput"
                    placeholder="Type your message here..."
                    autocomplete="off"
                />
                <button onclick="sendChat()">Send</button>
            </div>
        </div>
    </div>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="{{ url_for('static', filename='js/script.js') }}"></script>

<script>
  const sessionId = "{{ session_id }}";
  console.log(sessionId);
</script>
</body>
</html>
